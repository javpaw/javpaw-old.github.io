---
layout: post
title: A kind of pattern 'react' pattern
---

<p>
	Generally as we are mounting a component the first thing we do
	is to set some state in the component using the function <strong><i>getInitialState</i></strong> that we know and love.
</p>

<p>
	We have to keep in mind that this function is only called while we mount the component and is not not called when the component is updating; remember this and you will avoid a couple of headaches when you are developing an application in reactjs.
</p>

<p>
	From time to time we want to change state when we update our component based on old state, old props and new props.
</p>

<p>
a recurrent <i>'pattern'</i> that is used is to create a function called <strong> computeState </strong> that takes the old state, the new props, the old props and generate the new state. This method is called from <strong> getInitialState  </strong> and <strong> componentWillReceiveProps. </strong> Given a function signature like:
</p>

<p>
function computeState(oldState, newProps, oldProps){
   <br>
   ...
  </br>
}
</p>

<p>
from getInitialState the call is something on the lines:
<br>
computeState({some:'new state'}, this.props, {});
</p>

<p>
and the call from componentWillReceiveProps:
<br>
computeState(this.state, newProps, this.props);
</p>

<p>
this is an effor to have just one place to calculate the new state when the component is mounted or updated, of course your mileage may vary.
An example of a component that works as an acumulator: <a href="http://jsfiddle.net/cmft0vmj/10/">jsfiddle</a> 
</p>

